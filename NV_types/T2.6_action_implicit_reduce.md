# T2.6 action_implicit_reduce (行为隐式缩减)

## 基本信息

| 属性 | 值 |
|------|-----|
| 类型编号 | T2.6 |
| 名称 | action_implicit_reduce |
| 标签 | NV (Non-Valid) |
| 源文件 | `CONSTRUCT_action_implicit_reduce.py` |
| 目标法条 | 354-0-0 (容留他人吸毒罪) |

## 处理概述

该修订类型使用**LLM**来修改案件事实，通过**添加"被胁迫"因素**来隐式改变犯罪行为的性质。这种修改方式不是直接改变行为本身，而是添加影响行为定性的外部因素。

## 筛选条件

```python
if case["relevant_articles"][0] == "354-0-0" and \
   case["fact"].find("容留") != -1 and \
   len(case["fact"]) > 245 and \
   len(case["fact"]) < 270:
```

## LLM Prompt设计

### System Prompt
```
你是一个中国司法领域的专家
```

### User Prompt 背景说明
```
现在需要你修改一个犯罪嫌疑人的经历的场景，让犯罪嫌疑人生成一段符合"被他人胁迫，容留他人吸食、注射毒品的"的经历。
```

### 参考例子

**修改前：**
> 被告人佟洪安让朱某购买冰毒，之后于当日下午2时许，在双阳区云山街道宋家4社自己家里，容留朱某吸食毒品一次...

**修改后：**
> 被告人佟洪安**被朱某胁迫**，朱某让被告人佟洪安购买冰毒，之后于当日下午2时许，在双阳区云山街道宋家4社自己家里，**被朱某胁迫**，容留朱某吸食毒品一次...

## 核心修改逻辑

```python
def API_prompt_case_from_LLM(case, model="gpt-3.5-turbo-0125"):
    """
    调用LLM的API，获取prompt
    """
    user = USER + case + "</输入>"
    response = gpt_api_chat(SYS, user, 0.3, model)

    pattern = r'<输出>(.*?)</输出>'
    match = re.search(pattern, response, re.DOTALL)
    if match:
        return match.group(1)
    else:
        return response
```

## 修改效果示例

**修改前：**
> 2020年10月31日下午，被告人佟洪安让朱某购买冰毒，之后在自己家里，容留朱某吸食毒品一次，待朱某离开后，佟洪安又容留靳某在自己家里吸食毒品一次。

**修改后：**
> 2020年10月31日下午，被告人佟洪安**被朱某胁迫**，朱某让被告人佟洪安购买冰毒，之后在自己家里，**被朱某胁迫**，容留朱某吸食毒品一次，待朱某离开后，佟洪安又**被靳某胁迫**，容留靳某在自己家里吸食毒品一次。

## "隐式"的含义

与"显式"修改（直接替换关键词）不同，"隐式"修改的特点：

| 特点 | 说明 |
|------|------|
| 不改变核心行为 | "容留他人吸毒"行为本身不变 |
| 添加外部因素 | 添加"被胁迫"这一影响定性的因素 |
| 间接影响定罪 | 通过情节变化间接影响法律认定 |
| 依赖语义理解 | 需要LLM理解语境并合理插入胁迫描述 |

## NV标签解释

该修订被标记为NV(Non-Valid)的原因：
- 添加"被胁迫"因素改变了犯罪的主观意图
- 根据刑法，被胁迫犯罪可能减轻或免除处罚
- 使原本明确的犯罪事实变得在法律上存疑

## 法律背景

根据《中华人民共和国刑法》第二十八条：
> 对于被胁迫参加犯罪的，应当按照他的犯罪情节减轻处罚或者免除处罚。

因此，添加"被胁迫"因素会实质性改变案件的法律认定。

## T2.4 vs T2.5 vs T2.6 对比

| 类型 | 修改方式 | 修改内容 | 影响方式 |
|------|---------|---------|---------|
| T2.4 | LLM重写 | 吸食→注射 | 改变行为方式 |
| T2.5 | LLM+显式替换 | 吸食→注射 | 改变行为方式 |
| T2.6 | LLM添加因素 | 添加"被胁迫" | 改变主观意图 |

## 数据流

```
原始数据 → 筛选条件 → LLM生成(添加胁迫因素) → 保存数据集:
  ├── rid_short_tail_testing_set_poisoned_1 (完整数据集)
  ├── only_poinsoned_testing_set_poisoning_1 (污染后案件)
  └── only_poinsoned_testing_set_original_1 (原始案件)
```

## 输出文件

- `tasks/constituteElement_action_activity_abstraction_reduce/rid_short_tail_testing_set_poisoned_1.json`
- `tasks/constituteElement_action_activity_abstraction_reduce/only_poinsoned_testing_set_poisoning_1.json`
- `tasks/constituteElement_action_activity_abstraction_reduce/only_poinsoned_testing_set_original_1.json`
